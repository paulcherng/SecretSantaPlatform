# 更新日誌

## 2025-11-17 更新

### 新功能
1. **組別成員名單設定**
   - 在建立活動時，可以在組別設定中加入 `members` 陣列
   - 前台會顯示組別成員名單，例如：`PJ一家 [PJ, PJ太太] (1/2)`
   - 後台管理介面也會顯示完整的組別成員資訊

2. **修正管理後台無法開啟活動的問題**
   - 修正 `api/status.js` 支援管理員模式和前台模式
   - 管理員可以列出所有活動
   - 管理員可以查看單一活動的完整資料
   - 前台使用者只能看到基本統計資訊

### 組別設定格式範例

```json
[
  { 
    "id": 1, 
    "name": "光佑", 
    "limit": 1, 
    "members": ["光佑"] 
  },
  { 
    "id": 2, 
    "name": "Jefferson", 
    "limit": 1, 
    "members": ["Jefferson"] 
  },
  { 
    "id": 3, 
    "name": "PJ一家", 
    "limit": 2, 
    "members": ["PJ", "PJ太太"] 
  }
]
```

### 測試方式

1. 開啟 `/test` 頁面測試建立活動功能
2. 輸入管理密碼（環境變數 `ADMIN_SECRET`）
3. 填寫活動資訊和組別設定
4. 點擊「建立活動」
5. 複製產生的活動連結到前台測試
6. 在 `/admin` 後台管理介面查看活動

### 修正的檔案

- `api/status.js` - 支援管理員和前台兩種模式
- `api/draw.js` - 修正資料格式處理
- `api/submit.js` - 修正資料格式處理
- `api/delete-user.js` - 修正資料格式處理
- `admin.html` - 更新組別設定說明和顯示格式
- `index.html` - 顯示組別成員名單
- 新增 `test-create-event.html` - 測試頁面
- 新增 `vercel.json` - 路由配置
